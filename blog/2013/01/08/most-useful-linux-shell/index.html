
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>最有用的Linux命令列表 - SagerXiao's Blog</title>
  <meta name="author" content="Sager Xiao">

  
  <meta name="description" content="$ sudo !! Run the last command as root Useful when you forget to use sudo for a command. &#8220;!!&#8221; grabs the last run command. $ python -m &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sagerblog.github.com/blog/2013/01/08/most-useful-linux-shell/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SagerXiao's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">SagerXiao's Blog</a></h1>
  
    <h2>Restart of an old programmer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sagerblog.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">最有用的Linux命令列表</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-08T14:45:00+08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>$ sudo !!</h3>

<p><strong><em>Run the last command as root</em></strong></p>

<p>Useful when you forget to use sudo for a command. &#8220;!!&#8221; grabs the last run command.</p>

<hr />

<h3>$ python -m SimpleHTTPServer</h3>

<p><strong><em>Serve current directory tree at http://localhost:8000/</em></strong></p>

<hr />

<h3>$ :w !sodu tee %</h3>

<p><strong><em>Save a file you edited in vim without the needed permissions</em></strong></p>

<p>I often forget to sudo before editing a file I don&#8217;t have write permissions on. When you come to save that file and get the infamous &#8220;E212: Can&#8217;t open file for writing&#8221;, just issue that vim command in order to save the file without the need to save it to a temp file and then copy it back again.</p>

<!--more-->


<hr />

<h3>$ cd -</h3>

<p><strong><em>change to the previous working directory</em></strong></p>

<hr />

<h3>$ ^foo ^bar</h3>

<p><strong><em>Runs previous command but replacing</em></strong></p>

<p>Really useful for when you have a typo in a previous command. Also, arguments default to empty so if you accidentally run:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo "no typozs"</span></code></pre></td></tr></table></div></figure>


<p>you can correct it with</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>^z</span></code></pre></td></tr></table></div></figure>


<hr />

<h3>$ mtr google.com</h3>

<p><strong><em>mtr, better than traceroute and ping combined</em></strong></p>

<p>mtr combines the functionality of the traceroute and ping programs in a single network diagnostic tool.
As mtr starts, it investigates the network connection between the host mtr runs on and HOSTNAME. by sending packets with purposly low TTLs. It continues to send packets with low TTL, noting the response time of the intervening routers. This allows mtr to print the response percentage and response times of the internet route to HOSTNAME. A sudden increase in packetloss or response time is often an indication of a bad (or simply over?loaded) link.</p>

<hr />

<h3>$ ctrl-x e</h3>

<p><strong><em>Rapidly invoke an editor to write a long, complex, or tricky command</em></strong></p>

<p>Next time you are using your shell, try typing ctrl-x e (that is holding control key press x and then e). The shell will take what you&#8217;ve written on the command line thus far and paste it into the editor specified by $EDITOR. Then you can edit at leisure using all the powerful macros and commands of vi, emacs, nano, or whatever.</p>

<hr />

<h3>$ &lt;space>command</h3>

<p><strong><em>Execute a command without saving it in the history</em></strong></p>

<p>Prepending one or more spaces to your command won&#8217;t be saved in history.
Useful for pr0n or passwords on the commandline.
Tested on BASH.</p>

<hr />

<h3>$ file.txt</h3>

<p><strong><em>Empty a file</em></strong></p>

<p>For when you want to flush all content from a file without removing it (hat-tip to Marc Kilgus).</p>

<hr />

<h3>$ $ssh-copy-id user@host</h3>

<p><strong><em>Copy ssh keys to user@host to enable password-less ssh logins.</em></strong></p>

<hr />

<h3>$ reset</h3>

<p><strong><em>Salvage a borked terminal</em></strong></p>

<p>If you bork your terminal by sending binary data to STDOUT or similar, you can get your terminal back using this command rather than killing and restarting the session. Note that you often won&#8217;t be able to see the characters as you type them.</p>

<hr />

<h3>$ ffmpeg -f X11grab -s wxga -r 25 -i :0.0 -sameq /tmp/out.mpg</h3>

<p><strong><em>Capture video of a linux desktop</em></strong></p>

<hr />

<h3>$ &#8216;ALT+.&#8217; or &#8216;&lt;ESC> .&#8217;</h3>

<p><strong><em>Place the argument of the most recent command on the shell</em></strong></p>

<p>When typing out long arguments, such as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cp file.txt /var/www/wp-content/uploads/2009/03/</span></code></pre></td></tr></table></div></figure>


<p>You can put that argument on your command line by holding down the ALT key and pressing the period &#8216;.&#8217; or by pressing <ESC> then the period &#8216;.&#8217;. For example:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd 'ALT+.'</span></code></pre></td></tr></table></div></figure>


<p>would put &#8216;/var/www/wp-content/uploads/2009/03/ as my argument. Keeping pressing &#8216;ALT+.&#8217; to cycle through arguments of your commands starting from most recent to oldest. This can save a ton of typing.</p>

<hr />

<h3>$ mount | column -t</h3>

<p><strong><em>currently mounted filesystems in nice layout</em></strong></p>

<p>Particularly useful if you&#8217;re mounting different drives, using the following command will allow you to see all the filesystems currently mounted on your computer and their respective specs with the added benefit of nice formatting.</p>

<hr />

<h3>$ ssh -N -L2001:localhost:80 somemachine</h3>

<p><strong><em>start a tunnel from some machine&#8217;s port 80 to your local post 2001</em></strong></p>

<p>now you can acces the website by going to http://localhost:2001/</p>

<hr />

<h3>$ echo &#8220;ls -l&#8221; | at midnight</h3>

<p><strong><em>Execute a command at a given time</em></strong></p>

<p>This is an alternative to cron which allows a one-off task to be scheduled for a certain time.</p>

<hr />

<h3>$ dig +short text <keyword>.wp.dg.cx</h3>

<p><strong><em>Query Wikipedia via console over DNS</em></strong></p>

<p>Query Wikipedia by issuing a DNS query for a TXT record. The TXT record will also include a short URL to the complete corresponding Wikipedia entry.You can also write a little shell script like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cat wikisole.sh
</span><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'>dig +short txt <span class="k">${</span><span class="nv">1</span><span class="k">}</span>.wp.dg.cx
</span></code></pre></td></tr></table></div></figure>


<p>and run it like</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>./wikisole.sh unix
</span></code></pre></td></tr></table></div></figure>


<p>were your first option ($1) will be used as search term.</p>

<hr />

<h3>$ netstat -tlnp</h3>

<p><strong><em>Lists all listening ports together with the PID of the associated process</em></strong></p>

<p>The PID will only be printed if you&#8217;re holding a root equivalent ID.</p>

<hr />

<h3>$ dd if=/dev/dsp | ssh -c arcfour -C username@host dd of=/dev/dsp</h3>

<p><strong><em>output your microphone to a remote computer&#8217;s speaker</em></strong></p>

<p>This will output the sound from your microphone port to the ssh target computer&#8217;s speaker port. The sound quality is very bad, so you will hear a lot of hissing.</p>

<hr />

<h3>$ curl -u user:pass -d status=&#8221;Tweeting from the shell&#8221; http://twitter.com/statuses/update.xml</h3>

<p><strong><em>Update twitter via curl</em></strong></p>

<hr />

<h3>$ !!:gs/foo/bar</h3>

<p><strong><em>Runs previous command replacing foo by bar every time that foo appears</em></strong></p>

<p>Very useful for rerunning a long command changing some arguments globally.
As opposed to ^foo ^bar, which only replaces the first occurrence of foo, this one changes every occurrence.</p>

<hr />

<h3>$ mount -t tmpfs tmps /mnt -o size=1024m</h3>

<p><strong><em>Mount a temporary ram partition</em></strong></p>

<p>Makes a partition in ram which is useful if you need a temporary working space as read/write access is fast.</p>

<p>Be aware that anything saved in this partition will be gone after your computer is turned off.</p>

<hr />

<h3>$ man ascii</h3>

<p><strong><em>Quick access to the ascii table.</em></strong></p>

<hr />

<h3>$ sshfs name@server:/path/to/folder /path/to/mound/point</h3>

<p><strong><em>Mount folder/filesystem through SSH</em></strong></p>

<p>Install SSHFS from http://fuse.sourceforge.net/sshfs.html</p>

<p>Will allow you to mount a folder security over a network.</p>

<hr />

<h3>$ curl ifconfig.me</h3>

<p><strong><em>Get your external IP address</em></strong></p>

<p>curl ifconfig.me/ip -> IP Adress</p>

<p>curl ifconfig.me/host -> Remote Host</p>

<p>curl ifconfig.me/ua ->User Agent</p>

<p>curl ifconfig.me/port -> Port</p>

<p>curl ifconfig.me/all -> All</p>

<p>thanks to <a href="http://ifconfig.me/">ifconfig.me</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Sager Xiao</span></span>

      








  


<time datetime="2013-01-08T14:45:00+08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/shell/'>shell</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sagerblog.github.com/blog/2013/01/08/most-useful-linux-shell/" data-via="" data-counturl="http://sagerblog.github.com/blog/2013/01/08/most-useful-linux-shell/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/01/08/git-branch/" title="Previous Post: git分支的使用">&laquo; git分支的使用</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/01/15/linux-nginx-uwsgi/" title="Next Post: Linux配置Nginx+uWsgi环境">Linux配置Nginx+uWsgi环境 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/23/linux-process-memory/">linux下查看进程内存使用情况</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/21/python-walk-rename-file/">Python循环遍历所有文件并改名</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/21/python-file-line-count/">python计算文件行数的三种方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/16/rpm-command/">RPM使用详解</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/15/linux-service-auto-startup/">配置Nginx和uWsig服务开机自动启动</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/sagerxiao">@sagerxiao</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sagerxiao',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/sagerxiao?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sager Xiao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sagerblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sagerblog.github.com/blog/2013/01/08/most-useful-linux-shell/';
        var disqus_url = 'http://sagerblog.github.com/blog/2013/01/08/most-useful-linux-shell/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
